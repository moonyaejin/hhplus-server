# 📑 Requirements – 콘서트 좌석 예매 서비스
---
## 📌 기능적 요구사항

### 회원 관리
- 사용자는 회원가입을 통해 계정을 생성할 수 있다.
- 사용자는 등록된 이메일/비밀번호로 로그인할 수 있다.
- 로그인한 사용자만 예약/결제를 진행할 수 있다.

### 포인트 관리
- 사용자는 포인트를 충전할 수 있다.
- 사용자는 보유 포인트 및 충전/사용 내역을 조회할 수 있다.
- 예약 결제 시 포인트가 차감된다.

### 콘서트 및 좌석 예약
- 사용자는 콘서트 목록 및 상세정보(날짜, 장소, 좌석)를 조회할 수 있다.
- 사용자는 1 ~ 50까지 중 원하는 좌석을 예약할 수 있다.
- 좌석 예약 후 결제를 완료하면 예약이 확정된다.
- 5분 내 결제가 완료되지 않으면 예약은 자동 취소된다.
- 취소된 좌석은 다른 사용자가 다시 예약할 수 있다.
- 사용자는 본인의 예약 내역을 조회할 수 있다.

### 대기열 관리
- 사용자는 서비스 접속 시 대기열 토큰을 발급받는다.
- 대기열 토큰에는 순번 및 예상 대기 시간이 포함된다.
- 사용자는 대기열 순번과 예상 대기 시간을 확인할 수 있다.
- 서비스 이용 완료 후 토큰은 만료된다.

### 예외 처리
- 잘못된 입력값(좌석 번호 범위, 날짜 형식 등) → `400 Bad Request`
- 잔액 부족으로 결제 실패 → `402 Payment Required`
- 대기열 미통과 사용자 → `403 Forbidden`
- 예약/결제 실패 시 적절한 에러 메시지를 제공한다.

---

## 📌 비기능적 요구사항

### 성능
- 평균 응답 시간은 **1초 이내**, 최악의 경우 **2초를 넘지 않도록** 한다.
- 대기열 상태 조회는 **실시간에 가깝게** 응답해야 한다.

### 동시성 제어
- 동일 좌석에 대해 **중복 예약이 불가능**해야 한다.
- 다중 인스턴스 환경에서도 **트랜잭션, DB Lock, 혹은 분산락(Redis 등)**을 통해 일관성을 유지해야 한다.

### 확장성
- 좌석 현황, 대기열 상태는 **캐시(Redis 등)** 를 통해 빠르게 조회할 수 있어야 한다.

### 보안
- 모든 API 요청은 **JWT 기반 인증/인가**를 거쳐야 한다.
- 사용자 비밀번호는 반드시 **암호화(BCrypt 등)** 해서 저장한다.

### 가용성
- 대규모 콘서트 예매처럼 짧은 시간에 집중되는 트래픽 상황에서도 **대기열 상태와 예약 정보**는 유실되지 않아야 한다.

### 유지보수성
- 모든 주요 API는 **테스트 코드** 를 통해 검증 가능해야 한다.
- API 문서는 자동화하여 협업자가 쉽게 이해할 수 있어야 한다.
